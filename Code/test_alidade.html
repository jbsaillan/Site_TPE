<!--Test altimètre-->

<html>
	<head>
		<meta charset="utf-8" />
		<link rel="stylesheet" href="css/page_style.css" />
		<title>Alidade</title>

		<style type="text/css">
		/*Général*/
			figure {
				background-color: rgb(34, 35, 37);
				border-top: 1px solid rgb(255, 204, 0);
				border-bottom: 1px solid rgb(255, 204, 0);

				width: 100%;
				min-width: 780px;
				padding: 0;
				margin: 0;
			}		

			figure * {
				margin: 0;
				padding: 0;
			}	

			#test_alidade {
				position: relative;
				width: 840px;
				min-height: 400px;

				margin: auto;
				margin-top: 40px;

				border: 1px solid red;
			}


			/*Scchéma du triangle*/
			#schema_alidade {
				margin: auto;

				width: 774px;
				min-height: 424px;

				position: relative;
			}

			#cote_x {
				position: absolute;
				top: 0px;
				left: 0px;

				width: 2px;
				min-height: 424px;

				background-color: red;
			}

			#cote_y {
				position: absolute;
				top: 424px;
				left: 0px;

				width: 424px;
				min-height: 2px;

				background-color: purple;
			}

			#cote_z {
				position: absolute;
				top: 0px;
				left: 0px;

				width: 2px;
				min-height: 600px;

				transform-origin: top;
				transform: rotate(-45deg);

				background-color: green;
			}


			/*Choix du côté à calculer*/
			#parametre_cote {
				width: 50%;

				margin: auto;
				margin-top: 10px;
			}

			#parametre_cote ul {
				list-style-type: none;

				border: 2px solid rgb(125, 169, 206);
			}

			#parametre_cote ul li {
				min-height: 25px;
				padding-left: 5px;
			}

			#choix_cote_x {
				border-bottom: 1px solid rgb(222, 222, 222);
			}

			.choix_cote_selectionne {
				background-color: rgb(125, 169, 206);
				color: white;
			}

			.choix_cote_normal {
				background-color: white;
				color: black;
			}

			.choix_cote_normal:hover {
				background-color: rgb(240, 240, 240);
			}

			#legende_choix_cote {
				color: rgb(240, 240, 240);

				text-align: center;
				text-decoration: underline;
			}


			/*Choix de l'angle et de y*/
			#parametre_alpha, #parametre_longueur_z {
				text-align: center;
				margin: auto;
				width: 50%;

				margin-top: 10px;
			}

			#parametre_alpha p:nth-of-type(1), #parametre_longueur_z p:nth-of-type(1) {
				background-color: white;
				border: 2px solid rgb(125, 169, 206);
			}

			#parametre_alpha p:nth-of-type(2), #parametre_longueur_z p:nth-of-type(2) {
				text-decoration: underline;
			}

			#parametre_alpha:hover p:nth-of-type(1), #parametre_longueur_z:hover p:nth-of-type(1) {
				background-color: rgb(240, 240, 240);
			}

			#parametre_alpha p:nth-of-type(2), #parametre_longueur_z p:nth-of-type(2) {
				text-decoration: underline;
				color: white;
			}
		</style>


		<script type="text/javascript">

			function calcul_alidade(z, alpha, rapport) {
				var y, x, cote_a_calculer, resultat;
				var alpha_radian = (alpha/180)*Math.PI;

				y = z * Math.cos(alpha_radian);

				x = z * Math.sin(alpha_radian);

				if (rapport == 'sinus') {
					cote_a_calculer = 'x';
				}
				else if (rapport == 'cosinus') {
					cote_a_calculer = 'y';
				}

				if (cote_a_calculer == 'x') {
					resultat = x;
				}
				else if (cote_a_calculer == 'y') {
					resultat = y;
				}

				document.getElementById("cote_a_calculer").innerHTML = 'Pour calculer le côté ' + cote_a_calculer + ':';	
				document.getElementById("formule_alidade").innerHTML = rapport + '(&alpha;) = ' + cote_a_calculer + '/z';	
				document.getElementById("formule_alidade_actualisee").innerHTML = cote_a_calculer + ' = ' + rapport + ' (&alpha;) * z';
				document.getElementById("formule_alidade_actualisee2").innerHTML = cote_a_calculer + ' = ' + rapport + ' (' + alpha + ') * ' + z; 	
				document.getElementById("resultat_calcul_alidade").innerHTML = 'Le cote ' + cote_a_calculer + ' mesure: ' + resultat;

				transform_figure(z, alpha, x, y);
			}

			function change_cote(z, alpha, rapport) {
				calcul_alidade(z, alpha, rapport);
				if (rapport == 'sinus') {
					document.getElementById("rapport_alidade").value = 'sinus';
					document.getElementById("choix_cote_x").className = 'choix_cote_selectionne';
					document.getElementById("choix_cote_y").className = 'choix_cote_normal';
				}
				else if (rapport == 'cosinus') {
					document.getElementById("rapport_alidade").value = 'cosinus';
					document.getElementById("choix_cote_y").className = 'choix_cote_selectionne';
					document.getElementById("choix_cote_x").className = 'choix_cote_normal';
				}
			}

			function change_longueur_z(z, alpha, rapport) {
				document.getElementById("longueur_z").value = z;
				calcul_alidade(z, alpha, rapport);
			}

			function change_alpha(z, alpha, rapport) {
				document.getElementById("nombre_alpha").value = alpha;
				calcul_alidade(z, alpha, rapport);
			}

			function transform_figure(z, alpha, x, y) {
				var z_px, x_px, y_px, angle;
				z_px = 2 * Math.round(z);
				x_px = 2 * Math.round(x);
				y_px = 2 * Math.round(y);
				angle = 180 - 90 - alpha;

				document.getElementById("cote_x").style.minHeight = x_px + 'px';
				
				document.getElementById("cote_y").style.width = y_px + 'px';
				document.getElementById("cote_y").style.top = x_px + 'px';

				document.getElementById("cote_z").style.minHeight = z_px + 'px';
				document.getElementById("cote_z").style.transform = 'rotate(' + -angle + 'deg)';
			}
		</script>


	</head>
	<body>
		<figure>
			<div id="test_alidade">

				<div id="schema_alidade">
					<div id="cote_x"></div>
					<div id="cote_y"></div>
					<div id="cote_z"></div>
					<div id="angle_alpha"></div>
				</div>

				<div id="parametre_alidade">

					<form method="get" name="form_alidade" action="test_alidade.html">

						<div id="parametre_cote">
							<ul>
								<li id="choix_cote_x" class="choix_cote_selectionne" onclick="change_cote(document.getElementById('mesure_z').value, document.getElementById('mesure_alpha').value, 'sinus')"> 
									L'opposé: x
								</li>
								<li id="choix_cote_y" class="choix_cote_normal" onclick="change_cote(document.getElementById('mesure_z').value, document.getElementById('mesure_alpha').value, 'cosinus')"> 	
									L'adjacent: y
								</li>
							</ul>
							<p id="legende_choix_cote">
								Choisissez (en cliquant) la longueur du côté à calculer
								<input type="hidden" id="rapport_alidade" value="sinus" />
							</p>
							
						</div>

						<div id="parametre_alpha">
							<p>
								<input type="number" id="nombre_alpha" name="angle_alpha" value="40" min="30" max="45" size="2" />
									<br />
								30° <input type="range" id="mesure_alpha" name="mesure_alpha" value="40" min="30" max="45" step="1" onchange="change_alpha(document.getElementById('mesure_z').value, document.getElementById('mesure_alpha').value, document.getElementById('rapport_alidade').value)" /> 45°
							</p>
							<p>
								<label for="mesure_alpha">Mesure de l'angle &alpha; en °</label>
							</p>
						</div>

						<div id="parametre_longueur_z">
							<p>
								<input type="number" id="longueur_z" name="longueur_z" value="200" min="100" max="300" size="2" />
									<br />
								100m <input type="range" id="mesure_z" name="mesure_z" value="200" min="100" max="300" step="1" onchange="change_longueur_z(document.getElementById('mesure_z').value, document.getElementById('mesure_alpha').value, document.getElementById('rapport_alidade').value)" /> 300m
							</p>
							<p>
								<label for="mesure_z">Mesure de la longueur z en mètres</label>
							</p>
						</div>

					</form>
				</div>

				<div id="resultat_alidade">
					<ul>
						<li id="cote_a_calculer">Pour calculer le côté opposé x:</li>
						<li id="formule_alidade">sin &alpha; = x/z</li>
						<li id="formule_alidade_actualisee">x = sin &alpha; * z</li>
						<li id="formule_alidade_actualisee2"> </li>
						<li id="resultat_calcul_alidade">Le cote x mesure: ...m</li>
					</ul>
				</div>

			</div>
		</figure>
	</body>
</html>